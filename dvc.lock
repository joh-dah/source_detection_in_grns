schema: '2.0'
stages:
  generate-training-data:
    cmd: python -W ignore -m src.data_creation_racipe --network mtor
    deps:
    - path: src/data_creation_racipe.py
      hash: md5
      md5: 2a934778b9449813715588023e77de8f
      size: 13369
    params:
      params.yaml:
        network: mtor
    outs:
    - path: data/training/raw
      hash: md5
      md5: e9aa3b7f7dbe1253a4b746293bd3e760.dir
      size: 629999
      nfiles: 111
  generate-validation-data:
    cmd: python -W ignore -m src.data_creation_racipe --validation --network mtor
    deps:
    - path: src/data_creation_racipe.py
      hash: md5
      md5: 2a934778b9449813715588023e77de8f
      size: 13369
    params:
      params.yaml:
        data_creation:
          beta:
          - 0.005
          - 0.01
          n_nodes:
          - 10
          - 100
          propagations_per_real_world_graph: 20
          relative_infected:
          - 0.1
          - 0.5
          n_sources: 1
          root_seed_training: 11650217406899810833644412201113384193
          root_seed_validation: 11650217406899810833644412201113384194
          small_input: false
          training_size: 100
          validation_size: 10
    outs:
    - path: data/validation/raw
      hash: md5
      md5: a313375b3c91630e17bb75fff5f3ff3b.dir
      size: 209235
      nfiles: 37
  process-validation-data:
    cmd: python -W ignore -m src.data_processing --validation
    deps:
    - path: data/validation/raw
      hash: md5
      md5: a313375b3c91630e17bb75fff5f3ff3b.dir
      size: 209235
      nfiles: 37
    - path: src/data_processing.py
      hash: md5
      md5: a06f08d1183c1ba8285d9355b3715acb
      size: 7492
    params:
      params.yaml:
        data_creation:
          beta:
          - 0.005
          - 0.01
          n_nodes:
          - 10
          - 100
          propagations_per_real_world_graph: 20
          relative_infected:
          - 0.1
          - 0.5
          n_sources: 1
          root_seed_training: 11650217406899810833644412201113384193
          root_seed_validation: 11650217406899810833644412201113384194
          small_input: false
          training_size: 100
          validation_size: 10
        model: GCNSI
    outs:
    - path: data/validation/processed
      hash: md5
      md5: c6451d5fe745593d7331e9fde3466b08.dir
      size: 235437
      nfiles: 39
  process-training-data:
    cmd: python -W ignore -m src.data_processing
    deps:
    - path: data/training/raw
      hash: md5
      md5: e9aa3b7f7dbe1253a4b746293bd3e760.dir
      size: 629999
      nfiles: 111
    - path: src/data_processing.py
      hash: md5
      md5: a06f08d1183c1ba8285d9355b3715acb
      size: 7492
    params:
      params.yaml:
        data_creation:
          beta:
          - 0.005
          - 0.01
          n_nodes:
          - 10
          - 100
          propagations_per_real_world_graph: 20
          relative_infected:
          - 0.1
          - 0.5
          n_sources: 1
          root_seed_training: 11650217406899810833644412201113384193
          root_seed_validation: 11650217406899810833644412201113384194
          small_input: false
          training_size: 100
          validation_size: 10
        model: GCNSI
    outs:
    - path: data/training/processed
      hash: md5
      md5: eb6a0499f1cabd68e2801d66c70474c9.dir
      size: 703561
      nfiles: 113
  training:
    cmd: python -W ignore -m src.training
    deps:
    - path: data/training/processed
      hash: md5
      md5: eb6a0499f1cabd68e2801d66c70474c9.dir
      size: 703561
      nfiles: 113
    - path: src/training.py
      hash: md5
      md5: da1ad9410111af38f0a30532afef97f9
      size: 6017
    params:
      params.yaml:
        model: GCNSI
        model_name: GCNR_test_04_21
        training:
          alpha: 0.5
          batch_size: 64
          class_weighting: false
          epochs: 200
          graph_weighting: false
          hidden_size: 128
          layers: 2
          dropout: 0.3
          learning_rate: 0.001
          subsample: true
          useLogLoss: false
          weight_decay: 0.0005
    outs:
    - path: models/latest.pth
      hash: md5
      md5: eb863e3499ab7df50e6922da881e91ff
      size: 74869
  validation:
    cmd: python -W ignore -m src.validation --network mtor
    deps:
    - path: data/validation/processed
      hash: md5
      md5: c6451d5fe745593d7331e9fde3466b08.dir
      size: 235437
      nfiles: 39
    - path: models/latest.pth
      hash: md5
      md5: eb863e3499ab7df50e6922da881e91ff
      size: 74869
    - path: src/validation.py
      hash: md5
      md5: aec4279f6fbc3b1a3f31e67212c07535
      size: 19092
    - path: src/visualization.py
      hash: md5
      md5: 1c213dc89a89caf4053673a5216b1a87
      size: 10312
    params:
      params.yaml:
        model: GCNSI
        model_name: GCNR_test_04_21
  visualization:
    cmd: python -W ignore -m src.visualization --network mtor
    deps:
    - path: data/validation/processed
      hash: md5
      md5: c6451d5fe745593d7331e9fde3466b08.dir
      size: 235437
      nfiles: 39
    - path: models/latest.pth
      hash: md5
      md5: eb863e3499ab7df50e6922da881e91ff
      size: 74869
    - path: src/visualization.py
      hash: md5
      md5: 1c213dc89a89caf4053673a5216b1a87
      size: 10312
    params:
      params.yaml:
        model: GCNSI
        model_name: GCNR_test_04_21
        visualization:
          seed: 123
